{% extends layout_template  %}

{% block title %}
    <title realm="{{view.game.game_id}}">
        The Republic of Rome - Game {{view.game.name}} - {{view.game.phase}} phase
    </title>
{% endblock %}

{% block content %}

    {# HEADER : CURRENT HRAO, ORDER OF PLAY , CURRENT PHASE & SUBPHASE #}

    {% embed 'BoardElements/Header_new.twig' %}
    {% endembed %}

    {# THE CURRENT PHASE'S TEMPLATE #}
    {% if view.interface|length>0 %}
        {% embed view.game.phase ~ '/' ~ view.interface['name'] ~ '.twig' %}
        {% endembed %}
    {% endif %}

    {# YOUR PARTY #}

    <h3>Your Party</h3>
    {% embed 'BoardElements/Party_new.twig' with {'party' : view.yourParty} %}
    {% endembed %}

    {# YOUR HAND #}

    {% embed 'BoardElements/Deck_new.twig' with {'deck' : view.yourParty.hand } %}
    {% endembed %}

    {# OTHER PARTIES #}

    <h3>Other Parties</h3>
    {% for party in view.otherParties %}
        {% embed 'BoardElements/Party_new.twig' with {'party' : party } %}
        {% endembed %}
    {% endfor %}

    <h3>There are currently {{view.game.deck['drawDeck'].nbOfCards}} cards left to draw.</h3>
    
    {# FORUM #}

    {% embed 'BoardElements/Deck_new.twig' with {'deck' : view.game.deck['forum'] } %}
    {% endembed %}

    {# CURIA #}

    {% embed 'BoardElements/Deck_new.twig' with {'deck' : view.game.deck['curia'] } %}
    {% endembed %}

    {# WARS  #}

    {% for warName in view.game.warDecksNames %}
        {% embed 'BoardElements/Deck_new.twig' with {'deck' : view.game.deck[warName] } %}
        {% endembed %}
    {% endfor %}
       
    {# DEBUG - : show all cards & decks, and allow moving a card to a deck #}
{#
    <form class='form-inline json-submit' user_id='{{app.user.id}}' verb='MoveCard' gameId='{{game.getId()}}'>
        <h3>Debug - Cards</h3>
        <div class="btn-group" data-toggle="radio">
            {% for card in game.getFilteredCards()%}
                <div class="row">
                    <label>
                        <input type="radio" class="toggle" value="{{card.getId()}}" name="FromCard">
                        {{card.getName()}} [{{card.getLocation()['name']}}]
                    </label>
                </div>
            {% endfor %}
        </div>
        <h3>Debug - Decks</h3>
        <div class="btn-group" data-toggle="radio">
            {% for deck in game.getFilteredDecks()%}
                <div class="row">
                    <label>
                        <input type="radio" value="{{deck.getId()}}" name="ToDeck">
                        {{deck.getName()}}
                    </label>
                </div>
            {% endfor %}
        </div>
        <div class="row">
            <button type="submit" class="btn btn-warning">MOVE CARD</button>
        </div>
    </form>
  #}      
{% endblock %}
